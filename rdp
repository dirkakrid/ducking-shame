#!/bin/env bash
##########################################################################################################################################################################################
function usage {
cat << EOF
${0} - help
-x xephyr   - defaults to :13
-a address  - no default fails if not set
-e execute  - defaults to dwm
-p port     - defaults to 12724
-u user     - defaults to spareproject
EOF
if [[ ${2} ]];then printf "%s\n" "${2}";fi
}
##########################################################################################################################################################################################
XEPHYR=":13"
EXECUTE="dwm"
PORT="12724"
USER="spareproject"
##########################################################################################################################################################################################
while getopts 'x:a:e:p:u:' arg;do
case "${arg}" in
x) XEPHYR=${OPTARG};;
a) ADDRESS=${OPTARG};;
e) EXECUTE=${OPTARG};;
p) PORT=${OPTARG};;
u) USER=${OPTARG};;
h) usage 0;;
*) usage 1
esac
done
##########################################################################################################################################################################################
if [[ ! -z ${XEPHYR} && ! -z ${ADDRESS} && ! -z ${EXECUTE} && ! -z ${PORT} && ! -z ${USER} ]];then
export DISPLAY=:0
Xephyr -screen 1900x1060 ${XEPHYR} &
export DISPLAY=${XEPHYR}
ssh -o StrictHostKeyChecking="no" -o UserKnownHostsFile="/dev/null"  -p ${PORT} ${USER}@${ADDRESS} ${EXECUTE}
##########################################################################################################################################################################################
else usage 1;fi
##########################################################################################################################################################################################

